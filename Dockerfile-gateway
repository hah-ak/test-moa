FROM eclipse-temurin:17
WORKDIR /home/workdir/myApp

COPY ./gradle/wrapper ./gradle/wrapper
COPY ./build.gradle .
COPY ./settings.gradle .
COPY ./gradlew .
COPY ./gradlew.bat .
RUN chmod +x ./gradlew

COPY ./gateway ./gateway
COPY ./domain-modules ./domain-modules
ENTRYPOINT ["./gradlew",":gateway:bootRun", "--args=--spring.profiles.active=${ACTIVE_PROFILE} --app.mysql.server.url=${MYSQL_SERVER_URL} --app.redis.server.url=${REDIS_SERVER_URL} --app.kafka.server.url=${KAFKA_SERVER_URL}"]
#ENTRYPOINT ["tail", "-f", "/dev/null"]